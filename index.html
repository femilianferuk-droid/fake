<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake-Gifts.Ru - Открытие кейсов</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --accent-color: #ff4d8d;
            --dark-color: #1a1a2e;
            --light-color: #f8f9fa;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --gray-color: #6c757d;
        }

        body {
            background: linear-gradient(135deg, var(--dark-color) 0%, #16213e 100%);
            color: var(--light-color);
            min-height: 100vh;
            padding-bottom: 50px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px 0;
            border-bottom: 2px solid var(--primary-color);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo h1 {
            font-size: 28px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }

        .logo-icon {
            font-size: 32px;
            color: var(--accent-color);
        }

        .balance-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 22px;
            font-weight: 700;
            border: 2px solid var(--primary-color);
        }

        .balance-icon {
            color: var(--warning-color);
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        /* Cases Section */
        .section-title {
            font-size: 24px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--accent-color);
        }

        .cases-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .case-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .case-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border-color: var(--primary-color);
        }

        .case-image {
            height: 200px;
            width: 100%;
            background-color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: white;
        }

        .case-info {
            padding: 20px;
        }

        .case-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--light-color);
        }

        .case-price {
            font-size: 24px;
            font-weight: 800;
            color: var(--warning-color);
            margin-bottom: 15px;
        }

        .open-case-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .open-case-btn:hover {
            opacity: 0.9;
            transform: scale(1.02);
        }

        /* Inventory Section */
        .inventory-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            max-height: 600px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .inventory-item {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 12px;
            transition: background 0.3s;
        }

        .inventory-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .item-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            background-color: #444;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 24px;
            color: white;
        }

        .item-info {
            flex-grow: 1;
        }

        .item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .item-count {
            color: var(--gray-color);
            font-size: 14px;
        }

        .item-rarity {
            font-size: 12px;
            padding: 3px 10px;
            border-radius: 20px;
            font-weight: 600;
        }

        .rarity-common { background: #6c757d; color: white; }
        .rarity-uncommon { background: #2ecc71; color: white; }
        .rarity-rare { background: #3498db; color: white; }
        .rarity-epic { background: #9b59b6; color: white; }
        .rarity-legendary { background: #f39c12; color: white; }

        /* Modal for case opening */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            border: 3px solid var(--primary-color);
            box-shadow: 0 0 50px rgba(106, 17, 203, 0.5);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            cursor: pointer;
            color: var(--gray-color);
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: white;
        }

        .prize-reveal {
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin: 20px 0;
        }

        .prize-image {
            width: 150px;
            height: 150px;
            border-radius: 15px;
            margin: 0 auto 20px;
            background-color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: white;
        }

        .prize-name {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        .prize-rarity {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* Responsive */
        @media (max-width: 1100px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .cases-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-gift logo-icon"></i>
                <h1>Fake-Gifts.Ru</h1>
            </div>
            <div class="balance-container">
                <i class="fas fa-coins balance-icon"></i>
                <span id="balance">10000</span>₽
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <!-- Cases Section -->
            <div class="cases-section">
                <h2 class="section-title"><i class="fas fa-box-open"></i> Доступные кейсы</h2>
                <div class="cases-container" id="cases-container">
                    <!-- Cases will be loaded by JavaScript -->
                </div>
            </div>

            <!-- Inventory Section -->
            <div class="inventory-section">
                <h2 class="section-title"><i class="fas fa-archive"></i> Инвентарь</h2>
                <div class="inventory-container" id="inventory-container">
                    <!-- Inventory items will be loaded by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for prize reveal -->
    <div class="modal" id="prizeModal">
        <div class="modal-content">
            <span class="modal-close" id="closeModal">&times;</span>
            <h2>Поздравляем!</h2>
            <div class="prize-reveal">
                <div class="prize-image" id="prizeImage">
                    <i class="fas fa-gift"></i>
                </div>
                <h3 class="prize-name" id="prizeName">Название приза</h3>
                <div class="prize-rarity" id="prizeRarity">Редкость</div>
                <p>Вы выиграли этот предмет!</p>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn btn-primary" id="openAgain">Открыть еще раз</button>
                <button class="modal-btn btn-secondary" id="closeModalBtn">Закрыть</button>
            </div>
        </div>
    </div>

    <script>
        // Initial data
        let balance = 10000;
        let inventory = {};
        let currentCase = null;

        // Prizes data
        const prizes = [
            { id: 1, name: "Jolly Chimp", available: 132155, rarity: "rare", icon: "fas fa-monkey" },
            { id: 2, name: "Input Key", available: 159750, rarity: "uncommon", icon: "fas fa-key" },
            { id: 3, name: "Desk Calendar", available: 374077, rarity: "common", icon: "fas fa-calendar-alt" },
            { id: 4, name: "Swiss Watch", available: 29323, rarity: "epic", icon: "fas fa-clock" },
            { id: 5, name: "Sleigh Bell", available: 28000, rarity: "epic", icon: "fas fa-bell" },
            { id: 6, name: "Toy Bear", available: 57724, rarity: "rare", icon: "fas fa-otter" },
            { id: 7, name: "Sky Stilettos", available: 58640, rarity: "rare", icon: "fas fa-shoe-prints" },
            { id: 8, name: "Fresh Socks", available: 200509, rarity: "common", icon: "fas fa-socks" },
            { id: 9, name: "Clover Pin", available: 270970, rarity: "common", icon: "fas fa-leaf" },
            { id: 10, name: "Instant Ramen", available: 457382, rarity: "common", icon: "fas fa-utensils" },
            { id: 11, name: "Mousse Cake", available: 230505, rarity: "uncommon", icon: "fas fa-birthday-cake" },
            { id: 12, name: "Spring Basket", available: 231311, rarity: "uncommon", icon: "fas fa-basketball-ball" }
        ];

        // Cases data
        const cases = [
            { id: 1, name: "Базовый кейс", price: 50, icon: "fas fa-box", color: "#6c757d" },
            { id: 2, name: "Улучшенный кейс", price: 250, icon: "fas fa-box-open", color: "#2ecc71" },
            { id: 3, name: "Премиум кейс", price: 1000, icon: "fas fa-gem", color: "#3498db" },
            { id: 4, name: "Элитный кейс", price: 2500, icon: "fas fa-crown", color: "#9b59b6" },
            { id: 5, name: "Легендарный кейс", price: 5000, icon: "fas fa-fire", color: "#f39c12" }
        ];

        // Rarity weights for different cases
        const caseRarityWeights = {
            1: { common: 70, uncommon: 25, rare: 5, epic: 0, legendary: 0 },
            2: { common: 50, uncommon: 30, rare: 15, epic: 5, legendary: 0 },
            3: { common: 30, uncommon: 35, rare: 20, epic: 10, legendary: 5 },
            4: { common: 15, uncommon: 25, rare: 30, epic: 20, legendary: 10 },
            5: { common: 5, uncommon: 15, rare: 30, epic: 30, legendary: 20 }
        };

        // DOM elements
        const balanceElement = document.getElementById('balance');
        const casesContainer = document.getElementById('cases-container');
        const inventoryContainer = document.getElementById('inventory-container');
        const prizeModal = document.getElementById('prizeModal');
        const closeModalBtn = document.getElementById('closeModal');
        const closeModalBtn2 = document.getElementById('closeModalBtn');
        const openAgainBtn = document.getElementById('openAgain');
        const prizeNameElement = document.getElementById('prizeName');
        const prizeImageElement = document.getElementById('prizeImage');
        const prizeRarityElement = document.getElementById('prizeRarity');

        // Initialize the app
        function init() {
            loadInventory();
            renderCases();
            renderInventory();
            
            // Event listeners for modal
            closeModalBtn.addEventListener('click', closeModal);
            closeModalBtn2.addEventListener('click', closeModal);
            openAgainBtn.addEventListener('click', openCaseAgain);
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === prizeModal) {
                    closeModal();
                }
            });
        }

        // Load inventory from localStorage
        function loadInventory() {
            const savedInventory = localStorage.getItem('fakeGiftsInventory');
            if (savedInventory) {
                inventory = JSON.parse(savedInventory);
            } else {
                // Initialize empty inventory
                prizes.forEach(prize => {
                    inventory[prize.id] = 0;
                });
                saveInventory();
            }
            
            // Load balance
            const savedBalance = localStorage.getItem('fakeGiftsBalance');
            if (savedBalance) {
                balance = parseInt(savedBalance);
                balanceElement.textContent = balance.toLocaleString('ru-RU');
            }
        }

        // Save inventory to localStorage
        function saveInventory() {
            localStorage.setItem('fakeGiftsInventory', JSON.stringify(inventory));
            localStorage.setItem('fakeGiftsBalance', balance.toString());
        }

        // Render cases
        function renderCases() {
            casesContainer.innerHTML = '';
            
            cases.forEach(caseItem => {
                const caseElement = document.createElement('div');
                caseElement.className = 'case-card';
                caseElement.innerHTML = `
                    <div class="case-image" style="background: linear-gradient(135deg, ${caseItem.color}20 0%, ${caseItem.color}40 100%); color: ${caseItem.color};">
                        <i class="${caseItem.icon}"></i>
                    </div>
                    <div class="case-info">
                        <div class="case-name">${caseItem.name}</div>
                        <div class="case-price">${caseItem.price}₽</div>
                        <button class="open-case-btn" data-case-id="${caseItem.id}">Открыть за ${caseItem.price}₽</button>
                    </div>
                `;
                
                casesContainer.appendChild(caseElement);
                
                // Add event listener to the button
                const openBtn = caseElement.querySelector('.open-case-btn');
                openBtn.addEventListener('click', () => openCase(caseItem));
            });
        }

        // Render inventory
        function renderInventory() {
            inventoryContainer.innerHTML = '';
            
            // Filter items that are in inventory
            const ownedItems = prizes.filter(prize => inventory[prize.id] > 0);
            
            if (ownedItems.length === 0) {
                inventoryContainer.innerHTML = '<p style="text-align: center; color: #6c757d; padding: 20px;">Инвентарь пуст. Откройте кейсы, чтобы получить предметы!</p>';
                return;
            }
            
            // Sort by count (descending)
            ownedItems.sort((a, b) => inventory[b.id] - inventory[a.id]);
            
            ownedItems.forEach(prize => {
                const itemElement = document.createElement('div');
                itemElement.className = 'inventory-item';
                itemElement.innerHTML = `
                    <div class="item-image" style="background: linear-gradient(135deg, ${getRarityColor(prize.rarity)}20 0%, ${getRarityColor(prize.rarity)}40 100%); color: ${getRarityColor(prize.rarity)};">
                        <i class="${prize.icon}"></i>
                    </div>
                    <div class="item-info">
                        <div class="item-name">${prize.name}</div>
                        <div class="item-count">В инвентаре: ${inventory[prize.id]} шт.</div>
                    </div>
                    <div class="item-rarity rarity-${prize.rarity}">${getRarityName(prize.rarity)}</div>
                `;
                
                inventoryContainer.appendChild(itemElement);
            });
        }

        // Open a case
        function openCase(caseItem) {
            if (balance < caseItem.price) {
                alert('Недостаточно средств!');
                return;
            }
            
            // Deduct balance
            balance -= caseItem.price;
            balanceElement.textContent = balance.toLocaleString('ru-RU');
            
            // Get random prize based on case rarity weights
            const prize = getRandomPrize(caseItem.id);
            
            // Add to inventory
            inventory[prize.id]++;
            
            // Save state
            saveInventory();
            
            // Set current case
            currentCase = caseItem;
            
            // Show prize in modal
            showPrize(prize);
            
            // Update inventory display
            renderInventory();
        }

        // Get random prize based on case rarity weights
        function getRandomPrize(caseId) {
            const weights = caseRarityWeights[caseId];
            
            // Create array of prizes filtered by available rarities for this case
            const availablePrizes = prizes.filter(prize => weights[prize.rarity] > 0);
            
            // Create weighted array
            let weightedPrizes = [];
            availablePrizes.forEach(prize => {
                const weight = weights[prize.rarity];
                for (let i = 0; i < weight; i++) {
                    weightedPrizes.push(prize);
                }
            });
            
            // Select random prize
            const randomIndex = Math.floor(Math.random() * weightedPrizes.length);
            return weightedPrizes[randomIndex];
        }

        // Show prize in modal
        function showPrize(prize) {
            prizeNameElement.textContent = prize.name;
            prizeRarityElement.textContent = getRarityName(prize.rarity);
            prizeRarityElement.className = `prize-rarity rarity-${prize.rarity}`;
            
            // Set icon and color
            prizeImageElement.innerHTML = `<i class="${prize.icon}" style="color: ${getRarityColor(prize.rarity)};"></i>`;
            prizeImageElement.style.background = `linear-gradient(135deg, ${getRarityColor(prize.rarity)}20 0%, ${getRarityColor(prize.rarity)}40 100%)`;
            
            // Show modal
            prizeModal.style.display = 'flex';
        }

        // Close modal
        function closeModal() {
            prizeModal.style.display = 'none';
        }

        // Open case again
        function openCaseAgain() {
            closeModal();
            if (currentCase) {
                openCase(currentCase);
            }
        }

        // Helper functions
        function getRarityName(rarity) {
            const names = {
                common: 'Обычный',
                uncommon: 'Необычный',
                rare: 'Редкий',
                epic: 'Эпический',
                legendary: 'Легендарный'
            };
            return names[rarity] || rarity;
        }

        function getRarityColor(rarity) {
            const colors = {
                common: '#6c757d',
                uncommon: '#2ecc71',
                rare: '#3498db',
                epic: '#9b59b6',
                legendary: '#f39c12'
            };
            return colors[rarity] || '#6c757d';
        }

        // Reset data (for testing)
        function resetData() {
            if (confirm('Вы уверены, что хотите сбросить все данные? Баланс и инвентарь будут восстановлены к начальным значениям.')) {
                balance = 10000;
                balanceElement.textContent = balance.toLocaleString('ru-RU');
                
                prizes.forEach(prize => {
                    inventory[prize.id] = 0;
                });
                
                saveInventory();
                renderInventory();
                alert('Данные сброшены! Баланс восстановлен до 10,000₽.');
            }
        }

        // Add reset button to header (for testing)
        document.addEventListener('DOMContentLoaded', () => {
            init();
            
            // Add reset button to header
            const headerContent = document.querySelector('.header-content');
            const resetBtn = document.createElement('button');
            resetBtn.innerHTML = '<i class="fas fa-redo"></i> Сбросить';
            resetBtn.style.background = 'rgba(231, 76, 60, 0.2)';
            resetBtn.style.color = '#e74c3c';
            resetBtn.style.border = '1px solid #e74c3c';
            resetBtn.style.borderRadius = '20px';
            resetBtn.style.padding = '10px 20px';
            resetBtn.style.cursor = 'pointer';
            resetBtn.style.fontWeight = '600';
            resetBtn.style.marginLeft = '15px';
            resetBtn.addEventListener('click', resetData);
            
            const balanceContainer = document.querySelector('.balance-container');
            balanceContainer.appendChild(resetBtn);
        });

        // Instructions for running locally
        console.log("Сайт Fake-Gifts.Ru запущен!");
        console.log("Чтобы запустить сайт на локальном хосте:");
        console.log("1. Сохраните этот код как index.html");
        console.log("2. Откройте его в браузере или используйте локальный сервер");
        console.log("3. Для запуска на локальном сервере используйте: python -m http.server 8000");
        console.log("4. Затем откройте в браузере: http://localhost:8000");
    </script>
</body>
</html>
